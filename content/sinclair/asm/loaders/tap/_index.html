---
type: "manual"
title: "TAP"
linkTitle: "TAP"
description: "Example code to load a machine code program in TAP format"
categories:
  - spectrum
tags:
  - Z80 Example
resources:
  - name: "helloworld.z80"
    url: "/sinclair/asm/loaders/tap/helloworld.z80"
    size: "3K"
  - name: "loader.tap"
    url: "/sinclair/asm/loaders/tap/loader.tap"
    size: "80B"
  - name: "example.tap"
    url: "/sinclair/asm/loaders/tap/example.tap"
    size: "135B"
no_list: true
---

<p>
  A <code>.TAP</code> file is a simple image format used to represent data saved to tape.
  It's a simple <a href="../../../formats/tap/">image format</a> which can be generated by some assemblers like
  <code>zasm</code>.
</p>

<p>
  Now we have a simple <a href="loader/">BASIC loader</a> which generates a <code>.TAP</code> file.
  This is effectively a simple BASIC program which when run loads the next file on the tape into memory at address
  24000 0x5DC0 and then executes the machine code at that same address.
</p>

<h2 id="helloworld">Hello World Example</h2>

<p>
  For this example we will write a simple machine code program which writes Hello World to the screen.
</p>

{{< highlight go "linenos=inline" >}}
wget https://area51.dev/sinclair/asm/loaders/tap/loader.tap
wget https://area51.dev/sinclair/asm/loaders/tap/helloworld.z80
zasm helloworld.z80
cat loader.tap helloworld.tap > tape.tap
{{< /highlight >}}
<p>
  The commands do the following:
</p>
<ol>
  <li>
    Download <a href="loader.tap">loader.tap</a> which is the precompiled loader.
    The source is viewable <a href="loader/">here</a> along with how to compile it yourself.
  </li>
  <li>
    Download <code>helloworld.z80</code> which is the source shown below.
  </li>
  <li>
    Compiles the source generating <code>helloworld.tap</code>.
  </li>
  <li>
    Concatenates both tap files to generate our final <code>tape.tap</code> file.
  </li>
</ol>
<p>
  Links to the required files are available in the Resources panel at the top right of this page including
  a precompiled <code>helloworld.tap</code> file.
</p>

<div class="row">
  <div class="col-6">
    <h3>Running the example</h3>
    <p>
      If no errors occurred you can run it with the <code>fuze</code> emulator:
    </p>
{{< highlight go "linenos=inline" >}}
fuse tape.tap
{{< /highlight >}}
    <p>
      You should then see something like this screenshot.
    </p>
    <p>
      The first line visible is from the boot loader as it loaded the file in <code>helloworld.tap</code>.
    </p>
    <p>
      The second line is the output of the source below.
    </p>
  </div>
  <div class="col-6">
      <img src="helloworld.png" alt="Hello World in Fuse Emulator"/>
  </div>
</div>

<h3>helloworld.z80 source</h3>
{{< book/include src="content/sinclair/asm/loaders/tap/helloworld.z80" >}}
